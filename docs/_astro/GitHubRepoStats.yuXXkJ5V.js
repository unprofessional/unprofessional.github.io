import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.RH_Wq4ov.js";const g=600*1e3;function m(r){try{const s=localStorage.getItem(r);if(!s)return null;const{at:a,data:i}=JSON.parse(s);return!a||Date.now()-a>g?null:i}catch{return null}}function x(r,s){try{localStorage.setItem(r,JSON.stringify({at:Date.now(),data:s}))}catch{}}async function _(r){const s=await fetch(`https://api.github.com/repos/${r}`,{headers:{Accept:"application/vnd.github+json"},cache:"no-store"});if(!s.ok)throw new Error(`${r} ${s.status}`);return s.json()}function c(r){try{return Intl.NumberFormat(void 0,{notation:"compact"}).format(r)}catch{return String(r)}}function S({repos:r=[]}){const s=l.useMemo(()=>`gh:repos:${r.join(",")}`,[r]),[a,i]=l.useState(()=>m(s)),[u,p]=l.useState(a?"ready":"loading"),[h,f]=l.useState(null);return l.useEffect(()=>{let e=!1;return(async()=>{try{const o=await Promise.all(r.map(d=>_(d).then(n=>({id:d,name:n.name,full_name:n.full_name,html_url:n.html_url,description:n.description,stargazers_count:n.stargazers_count,forks_count:n.forks_count,open_issues_count:n.open_issues_count,pushed_at:n.pushed_at,language:n.language}))));e||(i(o),x(s,o),p("ready"))}catch(o){e||(f(String(o?.message||o)),p("error"))}})(),()=>{e=!0}},[s]),u==="loading"?t.jsx("p",{children:"Loading GitHub stats‚Ä¶"}):u==="error"?t.jsxs("div",{children:[t.jsxs("p",{style:{color:"#b00"},children:["GitHub API error: ",h]}),t.jsx("p",{children:"Fallback badges:"}),t.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:r.map(e=>t.jsx("a",{href:`https://github.com/${e}`,target:"_blank",rel:"noreferrer",children:t.jsx("img",{alt:`${e} stars`,src:`https://img.shields.io/github/stars/${e}?style=flat`})},e))})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"16px"},children:a?.map(e=>t.jsxs("a",{href:e.html_url,target:"_blank",rel:"noreferrer",style:{display:"block",textDecoration:"none",color:"inherit",border:"1px solid #e5e7eb",borderRadius:"14px",padding:"14px",boxShadow:"0 1px 2px rgba(0,0,0,.04)"},children:[t.jsxs("div",{style:{fontSize:"16px",fontWeight:600,marginBottom:6},children:[e.name,e.language?t.jsxs("span",{style:{fontSize:"12px",fontWeight:500,color:"#666",marginLeft:8},children:["‚Ä¢ ",e.language]}):null]}),e.description?t.jsx("div",{style:{color:"#555",fontSize:"14px",marginBottom:10},children:e.description}):null,t.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"#444"},children:[t.jsxs("span",{children:["‚≠ê ",c(e.stargazers_count)]}),t.jsxs("span",{children:["üç¥ ",c(e.forks_count)]}),t.jsxs("span",{children:["üêõ ",c(e.open_issues_count)]})]}),t.jsxs("div",{style:{fontSize:"12px",color:"#777",marginTop:8},children:["Updated ",new Date(e.pushed_at).toLocaleDateString()]})]},e.full_name))})}export{S as default};
